# GAME_X

Я старалась оставлять максимально подробные комментарии в коде, если это понадобится.
Если какие-то файлы загружать было не нужно, то прошу прощения за это. (Я работала в 2d шаблоне, если нужно, переделаю на 3d шаблон.)
Теперь комментарии к тому, что было выгружено.

Про управление в сцене и ориентирование в ассетах проекта:
1. Передвижение игрока - либо WASD, либо стрелки. Разбивания на два набора кнопок для мультиплеера в коде нет. Игрок движется вверх-вниз, влево-вправо. Движение не связано с поворотом спрайта. (Если нужно, исправлю это.)
2. Поворот игрока происходит по нажатию кнопок **q**,**e** ("Rotate" в Input менеджере). (Делала для того, чтобы потом стрельбу по прямой прикрутить можно было. Если нужно, то можно запретить поворот во время движения, а во время движения поворачиваться по зоду движения.)
3. Двери открываются по нажатию кнопки "Open_door" (либо **x**, либо пробел). Закрываются автоматически при выходе из зоны коллайдера-триггера. (Т.е. если игрок отошёл не такое расстояние, что нажатие кнопки больше дверь не откроет, то дверь закроется сама.)
4. Ключи подбираются автоматически. После сбора становятся Disabled. Но явного удаления нет. Если нужен сбор по кнопке, то там править придётся не очень много. (Можно сделать аналогично скрипту на двери, например.)
5. Немного очевидные комментарии, но пусть будут:
    - Ярко рыжие блоки - стены, единственные статичные префабы.
    - Зелёные двери - обычные двери.
    - Синевато-голубоватый префаб - дверь с ключом. После сбора ключа открывается как обычная дверь.
    - Самая светлая, жёлто-зелёная дверь - это односторонняя. (Открыть можно только находясь левее по оси X, чем сама дверь. Но успеть вернуться, пока она не закрылась можно))

Про сам проект/ориентирование в нём:
1. Матрица Layer Collision Matrix была изменена. Осталось только взаимодействие слоя *Player* со слоями *Default*, *Collectable*, *Walls* и *Player*. Поэтому меняйте аккуратно, чтобы код не сломался.
2. Я старалась разносить логику и физику в скриптах, возможно, неоптимальным способом. Это буквально значит, что на *каждой* двери висит и Update, и FixedUpdate.
3. Что находится на целых значениях оси **Z** (чтобы каждый раз сравнивать не приходилось):
    - Z = 1. Тут только пол.
    - Z = 0. Все двери и ключи: префабы *Simple Door*, *Key And Door*, *One-sided Door*.
    - Z = -1. Здесь игрок и стены (*Player*, *Wall*)
4. Про использованные слои:
    - Player. Тут, очевидно, только игрок.
    - Collectable. Объекты, которые можно собрать. В данный момент это исключительно ключ в префабе *Key And Door*.
    - Walls. Это то, что ведёт себя схожим со стенами образом: сами стены и внутренние части префабов дверей, на которых висят спрайты.
    - Default. Всё остальное.
5. Тэги:
    - Сейчас используется тэг *Door* на объекте с триггером зоны двери (теоретическое расположение закрытой двери.)
    - Тэг *Player* для проверки, что взаимодействие было именно с тригерной частью префаба игрока.

Я допушил самого начального монстра. Основная проблема была в том, чтобы сделать ему перемещение, не врезаясь в стены, обходя препятствия. Задача оказалась неочевидной, было перебрано много непростых решений, одно даже попытался реализовать, но понял, что это перебор по замороченности. Недавно пришел к, вроде как, элегантному решению, в котором пока не вижу минусов: герой сохраняет следы за собой в листе, моб идет по этим следам(начиная с того, на котором он увидел героя, конечно), так, он будет обходить все препятствия, поскольку их будет обходить герой(следы берутся каждый фрейм, так что столкновений быть не должно). Это решение может быть дополнено тем, что моб может пытаться увидеть героя "напрямую", делая rayCast, и если видит его неподалеку, меняет маршрут на прямой. Так, он будет обходить препятствия, идя по следу героя, что даже является вполне логичным даже в лоре игры(идет по следам), а если видит его, то между ними нет препятствий и он идет напрямую. Пока часть с rayCast не реализована, но уже сейчас моб двигается, обходит препятствия и наносит урон(смерть происходит после консоли), еще не реализовано отталкивание после нанесения урона, сделаю, как пройдет череда кр.